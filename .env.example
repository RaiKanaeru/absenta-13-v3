# ===========================================
# ABSENTA 13 - Production Environment
# Copy this file to .env and update values
# Variables marked [REQUIRED] will cause startup failure if not set.
# ===========================================

# Node Environment
NODE_ENV=production
PORT=3001

# Database Configuration
DB_HOST=mysql
DB_PORT=3306
DB_USER=absenta
DB_PASSWORD=                    # [REQUIRED] Your secure database password
DB_NAME=absenta13
DB_CONNECTION_LIMIT=50
DB_TIMEZONE=+07:00

# Security
JWT_SECRET=                     # [REQUIRED] Min 32 characters, generate with: openssl rand -hex 32
HCAPTCHA_SECRET=                # [OPTIONAL] hCaptcha server-side secret key for login bot verification
SALT_ROUNDS=12
SESSION_EXPIRY=86400

# CORS - Update with your actual domains
ALLOWED_ORIGINS=https://absenta13.my.id,https://api.absenta13.my.id

# Redis (optional, for caching)
REDIS_HOST=redis
REDIS_PORT=6379

# Queue Guard (download/export backpressure)
QUEUE_EXPORT_CONCURRENCY=6
QUEUE_REPORT_CONCURRENCY=2
QUEUE_MAX_DEPTH=250
QUEUE_GLOBAL_RATE_MAX=20
QUEUE_GLOBAL_RATE_DURATION_MS=1000
QUEUE_JOB_ATTEMPTS=3
QUEUE_JOB_BACKOFF_DELAY_MS=2000
QUEUE_DEDUP_TTL_MS=60000
QUEUE_ENABLE_ADAPTIVE_THROTTLE=true
QUEUE_DB_CPU_WARN=80
QUEUE_DB_CPU_CRITICAL=90
QUEUE_WARNING_DELAY_MS=3000
QUEUE_CRITICAL_RETRY_AFTER_SECONDS=30
QUEUE_PRESSURE_CHECK_INTERVAL_MS=5000

# File Paths
UPLOAD_DIR=public/uploads
BACKUP_DIR=backups
ARCHIVE_DIR=archives
REPORTS_DIR=reports
LOG_DIR=logs

# API Configuration
API_BASE_URL=https://api.absenta13.my.id
VITE_API_BASE_URL=https://api.absenta13.my.id

# MySQL Root Password (for docker-compose)
MYSQL_ROOT_PASSWORD=            # [REQUIRED] Docker only - MySQL root password

# Timezone
TZ=Asia/Jakarta
